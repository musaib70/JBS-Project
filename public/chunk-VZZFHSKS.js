import{a as nt}from"./chunk-KLEVXXGU.js";import{a as rt}from"./chunk-CRHXL4XG.js";import{b as L,c as _,d as U,e as H,f as J,i as K,k as Q,l as X,m as Y,n as Z,o as $,p as tt,q as et,r as it}from"./chunk-GC5MTBRV.js";import"./chunk-Z2Z2GTJX.js";import{a as ot}from"./chunk-KLAMPWFI.js";import"./chunk-3X6K3PXT.js";import{Aa as l,Ba as c,Bb as G,Ca as v,Da as w,Db as k,Ea as S,Ga as b,Ia as x,Ja as u,L as M,Ra as p,S as y,Sa as A,T as h,Ta as T,Tc as R,Uc as q,Va as F,Wa as N,Xa as I,Za as E,cc as O,ia as r,ja as m,mb as D,nb as V,qa as g,qb as B,sa as s,tc as P,vc as W,wc as j,yc as z}from"./chunk-7UEHT57M.js";import"./chunk-RGL3W33T.js";var C=class{constructor(){this._id=null,this.name="",this.status=null}};function at(e,n){if(e&1&&(l(0,"option",11),p(1),c()),e&2){let a=n.$implicit;s("value",a.id),r(),A(a.status)}}function st(e,n){e&1&&v(0,"c-spinner",14)}function lt(e,n){if(e&1){let a=b();w(0),l(1,"button",12),x("click",function(){y(a);let o=u();return h(o.addCategory())}),g(2,st,1,0,"c-spinner",13),p(3," Publish Category "),c(),S()}if(e&2){let a=u();r(),s("disabled",a.loading),r(),s("ngIf",a.loading)}}function ct(e,n){e&1&&v(0,"c-spinner",14)}function dt(e,n){if(e&1){let a=b();w(0),l(1,"button",12),x("click",function(){y(a);let o=u();return h(o.updateCategory())}),g(2,ct,1,0,"c-spinner",13),p(3," Update Category "),c(),S()}if(e&2){let a=u();r(),s("disabled",a.loading),r(),s("ngIf",a.loading)}}var Dt=(()=>{let n=class n{constructor(t,o,i,f,d){this.route=t,this.router=o,this.postCategoryService=i,this.formBuilder=f,this.toastr=d,this.is_update=!1,this.page_title="Add",this.post_category=new C,this.categories=[],this.loading=!1,this.statuses=[{id:1,status:"Active"},{id:0,status:"Inactive"}],this.validation=new rt}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.postCategoryService.getExisting("post_category/edit/",t).subscribe(o=>{let i=o;this.post_category=i,console.log("Response",o)}),this.page_title="Update",this.is_update=!0),this.initializeForm()}initializeForm(){this.form=J,this.form=this.formBuilder.group({name:[this.post_category.name,_.compose([_.required])],status:[this.post_category.status,_.compose([_.required])]})}addCategory(){if(!this.validation.validateForm(this.form)){this.toastr.error("Category title is required!");return}try{this.loading=!0,this.postCategoryService.insert(this.post_category,"post_category/create").subscribe(t=>{t.status?(this.router.navigate(["/post_category"]),this.toastr.success("Post category has been added!")):t.status==!1&&(this.loading=!1,this.toastr.error(`${t.message}`))})}catch(t){console.log(t)}}updateCategory(){if(!this.validation.validateForm(this.form)){this.toastr.error("Category title is required!");return}try{this.loading=!0,this.postCategoryService.update(`post_category/update?id=${this.post_category._id}`,this.post_category).subscribe(t=>{t.status?(this.router.navigate(["/post_category"]),this.toastr.success("Category has been updated!")):t.status==!1&&(this.loading=!1,this.toastr.error(`${t.message}`))})}catch(t){console.log(t)}}};n.\u0275fac=function(o){return new(o||n)(m(G),m(k),m(nt),m(tt),m(ot))},n.\u0275cmp=M({type:n,selectors:[["app-add-new-category"]],standalone:!0,features:[E],decls:18,vars:7,consts:[[1,"bg-light","dark:bg-transparent","d-flex","flex-row","align-items-center"],["cForm","",3,"formGroup"],[1,"mb-3"],["cLabel","","for","exampleFormControlInput1"],["cFormControl","","id","category-name","placeholder","","type","text","formControlName","name",3,"ngModelChange","ngModel"],[1,"row","mb-3"],[1,"col-md-4"],["formControlName","status","aria-label","Large select example","cSelect","","sizing","md",1,"mb-3",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-5"],[4,"ngIf"],[3,"value"],["cButton","","color","primary",3,"click","disabled"],["color","white","size","sm","role","status","aria-hidden","true",4,"ngIf"],["color","white","size","sm","role","status","aria-hidden","true"]],template:function(o,i){o&1&&(l(0,"div",0)(1,"c-container")(2,"h1"),p(3),c(),l(4,"form",1)(5,"div",2)(6,"label",3),p(7,"Category Name"),c(),l(8,"input",4),I("ngModelChange",function(d){return N(i.post_category.name,d)||(i.post_category.name=d),d}),c()(),l(9,"div",5)(10,"div",6)(11,"label",3),p(12,"Status"),c(),l(13,"select",7),I("ngModelChange",function(d){return N(i.post_category.status,d)||(i.post_category.status=d),d}),g(14,at,2,2,"option",8),c()()(),l(15,"div",9),g(16,lt,4,2,"ng-container",10)(17,dt,4,2,"ng-container",10),c()()()()),o&2&&(r(3),T("",i.page_title," Category"),r(),s("formGroup",i.form),r(4),F("ngModel",i.post_category.name),r(5),F("ngModel",i.post_category.status),r(),s("ngForOf",i.statuses),r(2),s("ngIf",!i.is_update),r(),s("ngIf",i.is_update))},dependencies:[et,K,Z,$,L,Y,U,H,q,R,B,D,V,it,Q,X,z,P,j,O,W]});let e=n;return e})();export{Dt as AddNewCategoryComponent};
