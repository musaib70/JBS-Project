import{a as pe}from"./chunk-CRHXL4XG.js";import{b as K,c as s,d as Q,e as X,f as Z,i as $,j as ee,k as te,l as ie,m as oe,n as ne,o as re,p as ae,q as le,r as se}from"./chunk-GC5MTBRV.js";import{a as me}from"./chunk-Z2Z2GTJX.js";import{a as de}from"./chunk-KLAMPWFI.js";import"./chunk-3X6K3PXT.js";import{Aa as i,Ba as o,Bb as q,Ca as F,Da as x,Db as w,Ea as J,G as A,Ga as T,Ia as E,J as v,Ja as C,L as I,Ra as m,S as M,Sa as W,T as N,Ta as D,Tc as H,Uc as Y,Va as b,Wa as g,Xa as h,Za as B,cc as O,fa as y,ia as r,ja as _,mb as L,nb as z,qa as f,qb as P,ra as j,sa as u,sb as V,tc as k,vc as R,wc as G,yc as U}from"./chunk-7UEHT57M.js";import"./chunk-RGL3W33T.js";var S=class{constructor(){this._id=null,this.name="",this.department="",this.position="",this.job_type="",this.description="",this.job_details="",this.responsibilities="",this.experience={$numberDecimal:""},this.location="",this.status=""}};var ce=(()=>{let a=class a extends me{constructor(l,d){super(d,l)}};a.\u0275fac=function(d){return new(d||a)(v(w),v(V))},a.\u0275prov=A({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function _e(n,a){if(n&1&&(i(0,"option",21),m(1),o()),n&2){let p=a.$implicit;u("value",p.id),r(),W(p.value)}}function fe(n,a){if(n&1&&(i(0,"option",21),m(1),o()),n&2){let p=a.$implicit;u("value",p.id),r(),W(p.value)}}function Ce(n,a){n&1&&F(0,"c-spinner",24)}function ye(n,a){if(n&1){let p=T();x(0),i(1,"button",22),E("click",function(){M(p);let d=C();return N(d.addJob())}),f(2,Ce,1,0,"c-spinner",23),m(3," Publish Job "),o(),J()}if(n&2){let p=C();r(),u("disabled",p.loading),r(),u("ngIf",p.loading)}}function je(n,a){n&1&&F(0,"c-spinner",24)}function we(n,a){if(n&1){let p=T();x(0),i(1,"button",22),E("click",function(){M(p);let d=C();return N(d.updateJob())}),f(2,je,1,0,"c-spinner",23),m(3," Update Job "),o(),J()}if(n&2){let p=C();r(),u("disabled",p.loading),r(),u("ngIf",p.loading)}}var ke=(()=>{let a=class a{constructor(l,d,e,c,t){this.route=l,this.router=d,this.jobService=e,this.formBuilder=c,this.toastr=t,this.is_update=!1,this.page_title="Add",this.job=new S,this.base64File=null,this.loading=!1,this.statuses=[{id:"",value:"Select Status"},{id:0,value:"Opened"},{id:1,value:"Closed"}],this.jobTypes=[{id:"",value:"Select Job Type"},{id:"onsite",value:"On Site"},{id:"remote",value:"Remote"},{id:"hybrid",value:"Hybrid"}],this.validation=new pe}ngOnInit(){let l=this.route.snapshot.paramMap.get("id");l&&(this.jobService.getExisting("job/edit/",l).subscribe(d=>{let e=d;this.job=e,console.log("Response",d)}),this.page_title="Update",this.is_update=!0),this.initializeForm()}initializeForm(){this.form=Z,this.form=this.formBuilder.group({name:[this.job.name,s.compose([s.required])],department:[this.job.department,s.compose([s.required])],position:[this.job.position,s.compose([s.required])],job_type:[this.job.job_type,s.compose([s.required])],description:[this.job.description,s.compose([s.required])],job_details:[this.job.job_details,s.compose([s.required])],responsibilities:[this.job.responsibilities,s.compose([s.required])],experience:[this.job.experience,s.compose([s.required])],location:[this.job.location,s.compose([s.required])],status:[this.job.status,s.compose([s.required])]})}convertDateForUpdate(l){let d=l,e=new Date(d),c=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),ue=String(e.getDate()).padStart(2,"0");return`${c}-${t}-${ue}`}addJob(){if(!this.validation.validateForm(this.form)){this.toastr.error("Some fields are missing"),this.loading=!1;return}try{this.loading=!0,this.jobService.insert(this.job,"job/create").subscribe(l=>{l.status?(this.router.navigate(["/job"]),this.toastr.success("New job has been added successfully!")):l.status==!1&&(this.loading=!1,this.toastr.error(`${l.message}`))})}catch{this.loading=!1,this.toastr.error("Unknown error occured!")}}updateJob(){if(this.loading=!0,!this.validation.validateForm(this.form)){this.toastr.error("Some fields are missing"),this.loading=!1;return}this.jobService.update(`job/update?id=${this.job._id}`,this.job).subscribe(l=>{l.status?(this.router.navigate(["/job"]),this.toastr.success("Job has been updated successfully!")):l.status==!1&&(this.loading=!1,this.toastr.error(`${l.message}`))})}};a.\u0275fac=function(d){return new(d||a)(_(q),_(w),_(ce),_(ae),_(de))},a.\u0275cmp=I({type:a,selectors:[["app-add-new-job"]],standalone:!0,features:[B],decls:57,vars:19,consts:[[1,"bg-light","dark:bg-transparent","d-flex","flex-row","align-items-center"],["cForm","",3,"formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["cLabel","","for","formControl"],["cFormControl","","id","formControl","placeholder","title","type","text","formControlName","name",3,"ngModelChange","ngModel"],["cFormControl","","id","formControl","placeholder","department","type","text","formControlName","department",3,"ngModelChange","ngModel"],["cFormControl","","id","formControl","placeholder","job position","type","text","formControlName","position",3,"ngModelChange","ngModel"],["id","formControl","formControlName","job_type","cSelect","","sizing","md",1,"mb-3",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["cFormControl","","placeholder","experince in numbers/decimel","type","number","formControlName","experience",3,"ngModelChange","ngModel"],["cFormControl","","placeholder","location","type","text","formControlName","location",3,"ngModelChange","ngModel"],[1,"col-md-12"],["formControlName","description","placeholder","description","cFormControl","","id","FormControlTextarea","rows","4",3,"ngModelChange","ngModel"],["formControlName","job_details","placeholder","job details","cFormControl","","id","FormControlTextarea","rows","4",3,"ngModelChange","ngModel"],["formControlName","responsibilities","placeholder","responsibilities","cFormControl","","id","FormControlTextarea","rows","4",3,"ngModelChange","ngModel"],[1,"col-md-4"],["cLabel","","for","exampleFormControlInput1"],["formControlName","status","aria-label","Large select example","cSelect","","sizing","md",1,"mb-3",3,"ngModelChange","ngModel"],[1,"mb-5"],[4,"ngIf"],[3,"value"],["cButton","","color","primary",3,"click","disabled"],["color","white","size","sm","role","status","aria-hidden","true",4,"ngIf"],["color","white","size","sm","role","status","aria-hidden","true"]],template:function(d,e){d&1&&(i(0,"div",0)(1,"c-container")(2,"h2"),m(3),o(),i(4,"form",1)(5,"div",2)(6,"div",3)(7,"label",4),m(8,"Job Title"),o(),i(9,"input",5),h("ngModelChange",function(t){return g(e.job.name,t)||(e.job.name=t),t}),o()(),i(10,"div",3)(11,"label",4),m(12,"Department"),o(),i(13,"input",6),h("ngModelChange",function(t){return g(e.job.department,t)||(e.job.department=t),t}),o()()(),i(14,"div",2)(15,"div",3)(16,"label",4),m(17,"Job Position"),o(),i(18,"input",7),h("ngModelChange",function(t){return g(e.job.position,t)||(e.job.position=t),t}),o()(),i(19,"div",3)(20,"label",4),m(21,"Job Type"),o(),i(22,"select",8),h("ngModelChange",function(t){return g(e.job.job_type,t)||(e.job.job_type=t),t}),f(23,_e,2,2,"option",9),o()()(),i(24,"div",2)(25,"div",3)(26,"label",4),m(27,"Total Experince"),o(),i(28,"input",10),h("ngModelChange",function(t){return g(e.job.experience.$numberDecimal,t)||(e.job.experience.$numberDecimal=t),t}),o()(),i(29,"div",3)(30,"label",4),m(31,"Location"),o(),i(32,"input",11),h("ngModelChange",function(t){return g(e.job.location,t)||(e.job.location=t),t}),o()()(),i(33,"div",2)(34,"div",12)(35,"label",4),m(36,"Description"),o(),i(37,"textarea",13),h("ngModelChange",function(t){return g(e.job.description,t)||(e.job.description=t),t}),o()()(),i(38,"div",2)(39,"div",12)(40,"label",4),m(41,"Job Details"),o(),i(42,"textarea",14),h("ngModelChange",function(t){return g(e.job.job_details,t)||(e.job.job_details=t),t}),o()()(),i(43,"div",2)(44,"div",12)(45,"label",4),m(46,"Responsibilities"),o(),i(47,"textarea",15),h("ngModelChange",function(t){return g(e.job.responsibilities,t)||(e.job.responsibilities=t),t}),o()()(),i(48,"div",2)(49,"div",16)(50,"label",17),m(51,"Status"),o(),i(52,"select",18),h("ngModelChange",function(t){return g(e.job.status,t)||(e.job.status=t),t}),f(53,fe,2,2,"option",9),o()()(),i(54,"div",19),f(55,ye,4,2,"ng-container",20)(56,we,4,2,"ng-container",20),o()()()()),d&2&&(r(3),D("",e.page_title," Job"),r(),u("formGroup",e.form),r(5),b("ngModel",e.job.name),r(4),b("ngModel",e.job.department),r(5),b("ngModel",e.job.position),r(4),b("ngModel",e.job.job_type),r(),u("ngForOf",e.jobTypes),r(5),b("ngModel",e.job.experience.$numberDecimal),r(4),b("ngModel",e.job.location),r(5),b("ngModel",e.job.description),j("style","resize: none;",y),r(5),b("ngModel",e.job.job_details),j("style","resize: none;",y),r(5),b("ngModel",e.job.responsibilities),j("style","resize: none;",y),r(5),b("ngModel",e.job.status),r(),u("ngForOf",e.statuses),r(2),u("ngIf",!e.is_update),r(),u("ngIf",e.is_update))},dependencies:[P,L,z,Y,H,le,$,ne,re,K,ee,oe,Q,X,se,te,ie,U,k,G,O,R]});let n=a;return n})();export{ke as AddNewJobComponent};
