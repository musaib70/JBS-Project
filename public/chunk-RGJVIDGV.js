import{Pa as de}from"./chunk-PBTPFGVU.js";import{a as _e}from"./chunk-HKX74XDH.js";import{a as he}from"./chunk-Z2Z2GTJX.js";import{a as me}from"./chunk-KLAMPWFI.js";import{a as ue}from"./chunk-3X6K3PXT.js";import{$a as te,Aa as l,Ba as g,Ca as E,Da as S,Db as re,Ea as L,Ga as v,H as j,Ia as x,Ja as s,L as N,M as q,N as J,O as K,Qa as f,R as W,Ra as d,S as u,Sa as b,T as m,Ta as y,Tc as ce,U as O,Ua as Q,Uc as pe,Vc as ge,Ya as Z,Z as k,Za as ee,ab as M,ac as oe,bb as V,bc as se,cc as le,fb as ie,ga as Y,ia as o,ja as I,mb as R,nb as $,pb as ne,qa as _,qb as z,ra as X,sa as p,ua as T,yb as ae}from"./chunk-7UEHT57M.js";function ye(i,n){if(i&1){let e=v();l(0,"a",12),x("keyup.enter",function(){u(e),s(3);let a=f(1);return m(a.previous())})("click",function(){u(e),s(3);let a=f(1);return m(a.previous())}),d(1),l(2,"span",13),d(3),g()()}if(i&2){let e=s(3);o(),y(" ",e.previousLabel," "),o(2),b(e.screenReaderPageLabel)}}function we(i,n){if(i&1&&(l(0,"span",14),d(1),l(2,"span",13),d(3),g()()),i&2){let e=s(3);o(),y(" ",e.previousLabel," "),o(2),b(e.screenReaderPageLabel)}}function De(i,n){if(i&1&&(l(0,"li",9),_(1,ye,4,2,"a",10)(2,we,4,2,"span",11),g()),i&2){s(2);let e=f(1);T("disabled",e.isFirstPage()),o(),p("ngIf",1<e.getCurrent()),o(),p("ngIf",e.isFirstPage())}}function ke(i,n){if(i&1){let e=v();l(0,"a",12),x("keyup.enter",function(){u(e);let a=s().$implicit;s(2);let r=f(1);return m(r.setCurrent(a.value))})("click",function(){u(e);let a=s().$implicit;s(2);let r=f(1);return m(r.setCurrent(a.value))}),l(1,"span",13),d(2),g(),l(3,"span"),d(4),M(5,"number"),g()()}if(i&2){let e=s().$implicit,t=s(2);o(2),y("",t.screenReaderPageLabel," "),o(2),b(e.label==="..."?e.label:V(5,2,e.label,""))}}function Se(i,n){if(i&1&&(S(0),l(1,"span",16)(2,"span",13),d(3),g(),l(4,"span"),d(5),M(6,"number"),g()(),L()),i&2){let e=s().$implicit,t=s(2);o(3),y("",t.screenReaderCurrentLabel," "),o(2),b(e.label==="..."?e.label:V(6,2,e.label,""))}}function Le(i,n){if(i&1&&(l(0,"li"),_(1,ke,6,5,"a",10)(2,Se,7,5,"ng-container",15),g()),i&2){let e=n.$implicit;s(2);let t=f(1);T("current",t.getCurrent()===e.value)("ellipsis",e.label==="..."),o(),p("ngIf",t.getCurrent()!==e.value),o(),p("ngIf",t.getCurrent()===e.value)}}function Te(i,n){if(i&1){let e=v();l(0,"a",12),x("keyup.enter",function(){u(e),s(3);let a=f(1);return m(a.next())})("click",function(){u(e),s(3);let a=f(1);return m(a.next())}),d(1),l(2,"span",13),d(3),g()()}if(i&2){let e=s(3);o(),y(" ",e.nextLabel," "),o(2),b(e.screenReaderPageLabel)}}function Ee(i,n){if(i&1&&(l(0,"span",14),d(1),l(2,"span",13),d(3),g()()),i&2){let e=s(3);o(),y(" ",e.nextLabel," "),o(2),b(e.screenReaderPageLabel)}}function Me(i,n){if(i&1&&(l(0,"li",17),_(1,Te,4,2,"a",10)(2,Ee,4,2,"span",11),g()),i&2){s(2);let e=f(1);T("disabled",e.isLastPage()),o(),p("ngIf",!e.isLastPage()),o(),p("ngIf",e.isLastPage())}}function Ve(i,n){if(i&1&&(l(0,"ul",4),_(1,De,3,4,"li",5),l(2,"li",6),d(3),g(),_(4,Le,3,6,"li",7)(5,Me,3,4,"li",8),g()),i&2){let e=s(),t=f(1);T("responsive",e.responsive),o(),p("ngIf",e.directionLinks),o(2),Q(" ",t.getCurrent()," / ",t.getLastPage()," "),o(),p("ngForOf",t.pages)("ngForTrackBy",e.trackByIndex),o(),p("ngIf",e.directionLinks)}}var F=class{constructor(){this.change=new k,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(n){return n.id==null&&(n.id=this.DEFAULT_ID),this.instances[n.id]?this.updateInstance(n):(this.instances[n.id]=n,!0)}updateInstance(n){let e=!1;for(let t in this.instances[n.id])n[t]!==this.instances[n.id][t]&&(this.instances[n.id][t]=n[t],e=!0);return e}getCurrentPage(n){return this.instances[n]?this.instances[n].currentPage:1}setCurrentPage(n,e){if(this.instances[n]){let t=this.instances[n],a=Math.ceil(t.totalItems/t.itemsPerPage);e<=a&&1<=e&&(this.instances[n].currentPage=e,this.change.emit(n))}}setTotalItems(n,e){this.instances[n]&&0<=e&&(this.instances[n].totalItems=e,this.change.emit(n))}setItemsPerPage(n,e){this.instances[n]&&(this.instances[n].itemsPerPage=e,this.change.emit(n))}getInstance(n=this.DEFAULT_ID){return this.instances[n]?this.clone(this.instances[n]):{}}clone(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}},Fe=Number.MAX_SAFE_INTEGER,fe=(()=>{class i{constructor(e){this.service=e,this.state={}}transform(e,t){if(!(e instanceof Array)){let w=t.id||this.service.defaultId();return this.state[w]?this.state[w].slice:e}let a=t.totalItems&&t.totalItems!==e.length,r=this.createInstance(e,t),c=r.id,h,C,P=r.itemsPerPage,B=this.service.register(r);if(!a&&e instanceof Array){if(P=+P||Fe,h=(r.currentPage-1)*P,C=h+P,this.stateIsIdentical(c,e,h,C))return this.state[c].slice;{let A=e.slice(h,C);return this.saveState(c,e,A,h,C),this.service.change.emit(c),A}}else return B&&this.service.change.emit(c),this.saveState(c,e,e,h,C),e}createInstance(e,t){return this.checkConfig(t),{id:t.id!=null?t.id:this.service.defaultId(),itemsPerPage:+t.itemsPerPage||0,currentPage:+t.currentPage||1,totalItems:+t.totalItems||e.length}}checkConfig(e){let a=["itemsPerPage","currentPage"].filter(r=>!(r in e));if(0<a.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${a.join(", ")}`)}saveState(e,t,a,r,c){this.state[e]={collection:t,size:t.length,slice:a,start:r,end:c}}stateIsIdentical(e,t,a,r){let c=this.state[e];return!c||!(c.size===t.length&&c.start===a&&c.end===r)?!1:c.slice.every((C,P)=>C===t[a+P])}}return i.\u0275fac=function(e){return new(e||i)(I(F,16))},i.\u0275pipe=K({name:"paginate",type:i,pure:!1}),i})();var Be=(()=>{class i{constructor(e,t){this.service=e,this.changeDetectorRef=t,this.maxSize=7,this.pageChange=new k,this.pageBoundsCorrection=new k,this.pages=[],this.changeSub=this.service.change.subscribe(a=>{this.id===a&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){this.id===void 0&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(e){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return this.getCurrent()===1}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(e){this.pageChange.emit(e)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let e=this.service.getInstance(this.id);return e.totalItems<1?1:Math.ceil(e.totalItems/e.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){this.service.getInstance(this.id).id==null&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let e=this.service.getInstance(this.id),t=this.outOfBoundCorrection(e);t!==e.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(t),this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}):this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}outOfBoundCorrection(e){let t=Math.ceil(e.totalItems/e.itemsPerPage);return t<e.currentPage&&0<t?t:e.currentPage<1?1:e.currentPage}createPageArray(e,t,a,r){r=+r;let c=[],h=Math.max(Math.ceil(a/t),1),C=Math.ceil(r/2),P=e<=C,B=h-C<e,w=!P&&!B,A=r<h,D=1;for(;D<=h&&D<=r;){let G,U=this.calculatePageNumber(D,e,r,h),ve=D===2&&(w||B),be=D===r-1&&(w||P);A&&(ve||be)?G="...":G=U,c.push({label:G,value:U}),D++}return c}calculatePageNumber(e,t,a,r){let c=Math.ceil(a/2);return e===a?r:e===1?e:a<r?r-c<t?r-a+e:c<t?t-c+e:e:e}}return i.\u0275fac=function(e){return new(e||i)(I(F),I(ie))},i.\u0275dir=J({type:i,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[W]}),i})();function H(i){return!!i&&i!=="false"}var xe=(()=>{class i{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new k,this.pageBoundsCorrection=new k,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(e){this._directionLinks=H(e)}get autoHide(){return this._autoHide}set autoHide(e){this._autoHide=H(e)}get responsive(){return this._responsive}set responsive(e){this._responsive=H(e)}trackByIndex(e){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=N({type:i,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[["p","paginationApi"],[3,"pageChange","pageBoundsCorrection","id","maxSize"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(e,t){if(e&1){let a=v();l(0,"pagination-template",1,0),x("pageChange",function(c){return u(a),m(t.pageChange.emit(c))})("pageBoundsCorrection",function(c){return u(a),m(t.pageBoundsCorrection.emit(c))}),l(2,"nav",2),_(3,Ve,6,8,"ul",3),g()()}if(e&2){let a=f(1);p("id",t.id)("maxSize",t.maxSize),o(2),X("aria-label",t.screenReaderPaginationLabel),o(),p("ngIf",!(t.autoHide&&a.pages.length<=1))}},dependencies:[Be,$,R,ne],styles:[`.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}
`],encapsulation:2,changeDetection:0}),i})(),Ce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=q({type:i}),i.\u0275inj=j({providers:[F],imports:[[z]]}),i})();var Ne=(i,n,e)=>({itemsPerPage:i,currentPage:n,totalItems:e});function Re(i,n){if(i&1){let e=v();l(0,"button",5),x("click",function(){u(e);let a=s();return m(a.addNewItem())}),d(1," Add New "),g()}if(i&2){let e=s();p("disabled",e.loading)}}function $e(i,n){i&1&&(l(0,"div",6),E(1,"c-spinner",7),g())}function ze(i,n){if(i&1&&(l(0,"th"),d(1),g()),i&2){let e=n.$implicit;o(),b(e)}}function Ge(i,n){if(i&1&&(S(0),E(1,"img",12),L()),i&2){let e=s(2).$implicit,t=s(2);o(),p("src",t.host+e.image,Y)}}function Oe(i,n){if(i&1){let e=v();l(0,"span",14),x("click",function(){u(e);let a=s(2).$implicit,r=s().$implicit,c=s(2);return m(c.editRecord(r[a.columnValue]))}),O(),E(1,"svg",15),g()}if(i&2){let e=s(5);o(),p("cIcon",e.icons.cilPencil)}}function He(i,n){if(i&1){let e=v();l(0,"span",14),x("click",function(){u(e);let a=s(2).$implicit,r=s().$implicit,c=s(2);return m(c.toggleModal(r[a.columnValue]))}),O(),E(1,"svg",16),g()}if(i&2){let e=s(5);o(),p("cIcon",e.icons.cilTrash)}}function Ue(i,n){if(i&1&&(S(0),_(1,Oe,2,1,"span",13)(2,He,2,1,"span",13),L()),i&2){let e=s(4);o(),p("ngIf",e.isEdit),o(),p("ngIf",e.isDelete)}}function je(i,n){if(i&1&&(S(0),d(1),L()),i&2){let e=s().$implicit,t=s().$implicit;o(),y(" ",t[e.columnValue]," ")}}function qe(i,n){if(i&1&&(l(0,"td"),_(1,Ge,2,1,"ng-container",11)(2,Ue,3,2,"ng-container",11)(3,je,2,1,"ng-container",11),g()),i&2){let e=n.$implicit;o(),p("ngIf",e.columnValue=="image"),o(),p("ngIf",e.columnValue=="action"),o(),p("ngIf",e.columnValue!=="action"&&e.columnValue!=="image")}}function Je(i,n){if(i&1&&(l(0,"tr"),_(1,qe,4,3,"td",10),g()),i&2){let e=s(2);o(),p("ngForOf",e.columns)}}function Ke(i,n){if(i&1){let e=v();l(0,"table",8)(1,"app-modal",9),x("toggleModal",function(){u(e);let a=s();return m(a.toggleModal())})("trigger",function(a){u(e);let r=s();return m(r.deleteRecord(a))})("closeModal",function(){u(e);let a=s();return m(a.closeModal())}),g(),l(2,"thead")(3,"tr"),_(4,ze,2,1,"th",10),g()(),l(5,"tbody"),_(6,Je,2,1,"tr",10),M(7,"paginate"),g()()}if(i&2){let e=s();o(),p("visible",e.visibleModal)("objectId",e.deleteId),o(3),p("ngForOf",e.tableHeaders),o(2),p("ngForOf",V(7,4,e.columnsData,te(7,Ne,e.itemsPerPage,e.currentPage,e.totalCount)))}}var Bt=(()=>{let n=class n{constructor(t,a,r,c){this.router=t,this.sanitizer=a,this.baseService=r,this.toastr=c,this.columns=[],this.apiUrl="",this.isAdd=!1,this.isEdit=!1,this.isDelete=!1,this.type="",this.title="",this.addNewItemUrl="",this.host=ue.host,this.icons=de,this.tableHeaders=[],this.visibleModal=!1,this.deleteId=null,this.currentPage=1,this.itemsPerPage=10,this.totalCount=0,this.loading=!1,this.columnsData=[],this.listData=[],this.originalData=[],this.categories=[]}ngOnInit(){this.fetchCategories(),this.fetchList(),this.prepareTableHeaders()}getSanitizedHtml(t){return this.sanitizer.bypassSecurityTrustHtml(t)}fetchList(){try{this.loading=!0;let t=this.apiUrl.includes("?")?"&":"?",a=`${this.apiUrl}${t}page=${this.currentPage}&perpage=${this.itemsPerPage}`;this.baseService.list(a).subscribe(r=>{this.totalCount=r.headers.get("x-total-count")?r.headers.get("x-total-count"):0,this.listData=r.body,this.originalData=JSON.parse(JSON.stringify(r.body)),this.prepareColumnsData()})}catch(t){console.log(t)}}addNewItem(){this.router.navigate([this.addNewItemUrl])}fetchCategories(){try{this.baseService.list("post_category/list").subscribe(t=>{this.categories=t.body})}catch(t){console.log(t)}}changePage(t){this.currentPage=t,this.fetchList()}toggleModal(t=null){this.deleteId=t,this.visibleModal=!this.visibleModal}closeModal(){this.visibleModal=!1}editRecord(t){this.router.navigate([`/${this.type}/update`,t])}deleteRecord(t=null){try{this.baseService.delete(`${this.type}/delete`,t).subscribe(a=>{if(console.log(a),a.status==!1){this.toastr.error(`${a.message}`);return}this.fetchList()})}catch(a){console.log(a)}}prepareTableHeaders(){(this.isEdit||this.isDelete)&&this.columns.push({columnKey:"Actions",columnValue:"action"}),this.tableHeaders=this.columns.map(t=>t.columnKey)}prepareColumnsData(){this.type=="post"&&(this.listData.forEach(t=>{if(t.category_id){let a=this.categories.find(r=>r._id==t.category_id);t.category_id=a?a.name:""}t.status=t.status==1?"Active":"Inactive",t.action=t._id}),this.columnsData=this.listData),this.type=="post_category"&&(this.listData.forEach(t=>{t.status=t.status==1?"Active":"Inactive",t.action=t._id}),this.columnsData=this.listData),this.type=="lead_form"&&(this.listData.forEach(t=>{t.status=t.status==0?"In Process":"Fulfilled",t.action=t._id}),this.columnsData=this.listData),this.type=="job"&&(this.listData.forEach(t=>{t.status=t.status==0?"Opened":"Closed",t.experience=t.experience?.$numberDecimal,t.action=t._id}),this.columnsData=this.listData,console.log(this.columnsData)),this.type=="job_application"&&(this.listData.forEach(t=>{console.log(t),t.job=t.jobs.name,t.status=t.status==1?"Active":"Inactive",t.action=t._id}),this.columnsData=this.listData),this.loading=!1}};n.\u0275fac=function(a){return new(a||n)(I(re),I(ae),I(he),I(me))},n.\u0275cmp=N({type:n,selectors:[["app-grid"]],inputs:{columns:"columns",apiUrl:"apiUrl",isAdd:"isAdd",isEdit:"isEdit",isDelete:"isDelete",type:"type",title:"title",addNewItemUrl:"addNewItemUrl"},standalone:!0,features:[Z([oe]),ee],decls:7,vars:5,consts:[[1,"d-flex"],["class","ms-auto mb-3","cButton","","color","primary",3,"disabled","click",4,"ngIf"],["class","container d-flex justify-content-center",4,"ngIf"],["striped","true","cTable","",4,"ngIf"],[3,"pageChange","autoHide"],["cButton","","color","primary",1,"ms-auto","mb-3",3,"click","disabled"],[1,"container","d-flex","justify-content-center"],["variant","grow","size","sm"],["striped","true","cTable",""],["title","Delete","message","Are you sure you want to delete?",3,"toggleModal","trigger","closeModal","visible","objectId"],[4,"ngFor","ngForOf"],[4,"ngIf"],["height","50","width","50",3,"src"],["style","cursor: pointer;",3,"click",4,"ngIf"],[2,"cursor","pointer",3,"click"],["name","cilBell",1,"me-2","text-primary",3,"cIcon"],["name","cilBell",1,"me-2","text-danger",3,"cIcon"]],template:function(a,r){a&1&&(l(0,"div",0)(1,"h3"),d(2),g(),_(3,Re,2,1,"button",1),g(),_(4,$e,2,0,"div",2)(5,Ke,8,11,"table",3),l(6,"pagination-controls",4),x("pageChange",function(h){return r.changePage(h)}),g()),a&2&&(o(2),b(r.title),o(),p("ngIf",r.isAdd),o(),p("ngIf",r.loading),o(),p("ngIf",!r.loading),o(),p("autoHide",!0))},dependencies:[Ce,fe,xe,le,pe,ce,_e,se,z,R,$,ge]});let i=n;return i})();export{Bt as a};
