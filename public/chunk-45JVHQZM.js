import{a as pe}from"./chunk-CRHXL4XG.js";import{b as K,c as m,d as Q,e as X,f as Z,i as $,j as ee,k as te,l as oe,m as ie,n as ne,o as re,p as ae,q as le,r as de}from"./chunk-GC5MTBRV.js";import{a as se}from"./chunk-Z2Z2GTJX.js";import{a as me}from"./chunk-KLAMPWFI.js";import"./chunk-3X6K3PXT.js";import{Aa as o,Ba as i,Bb as k,Ca as N,Da as E,Db as w,Ea as T,G as I,Ga as W,Ia as x,J as y,Ja as S,L as A,Ra as s,S as F,Sa as B,T as M,Ta as D,Tc as Y,Uc as J,Va as f,Wa as g,Xa as h,Za as V,cc as O,fa as b,ia as l,ja as _,mb as P,nb as z,qa as C,qb as j,ra as L,sa as u,sb as q,tc as G,vc as R,wc as U,yc as H}from"./chunk-7UEHT57M.js";import"./chunk-RGL3W33T.js";var v=class{constructor(){this._id=null,this.name="",this.email="",this.phone="",this.message="",this.service="",this.date="",this.address="",this.status="",this.comments=""}};var ce=(()=>{let a=class a extends se{constructor(n,d){super(d,n)}};a.\u0275fac=function(d){return new(d||a)(y(w),y(q))},a.\u0275prov=I({token:a,factory:a.\u0275fac,providedIn:"root"});let r=a;return r})();function _e(r,a){if(r&1&&(o(0,"option",22),s(1),i()),r&2){let p=a.$implicit;u("value",p.id),l(),B(p.status)}}function Ce(r,a){r&1&&N(0,"c-spinner",25)}function Se(r,a){if(r&1){let p=W();E(0),o(1,"button",23),x("click",function(){F(p);let d=S();return M(d.addLeadForm())}),C(2,Ce,1,0,"c-spinner",24),s(3," Add Lead "),i(),T()}if(r&2){let p=S();l(),u("disabled",p.loading),l(),u("ngIf",p.loading)}}function we(r,a){r&1&&N(0,"c-spinner",25)}function ve(r,a){if(r&1){let p=W();E(0),o(1,"button",23),x("click",function(){F(p);let d=S();return M(d.updateLeadForm())}),C(2,we,1,0,"c-spinner",24),s(3," Update Lead "),i(),T()}if(r&2){let p=S();l(),u("disabled",p.loading),l(),u("ngIf",p.loading)}}var Oe=(()=>{let a=class a{constructor(n,d,e,c,t){this.route=n,this.router=d,this.formBuilder=e,this.leadFormService=c,this.toastr=t,this.leadform=new v,this.is_update=!1,this.page_title="Add",this.validation=new pe,this.loading=!1,this.statuses=[{id:0,status:"In Process"},{id:1,status:"Fulfilled"}]}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.leadFormService.getExisting("lead_form/edit/",n).subscribe(d=>{let e=d;this.leadform=e,this.leadform.date=this.convertDateForUpdate(this.leadform.date),console.log("Response",d)}),this.page_title="Update",this.is_update=!0),this.initializeForm()}initializeForm(){this.form=Z,this.form=this.formBuilder.group({name:[this.leadform.name,m.compose([m.required])],email:[this.leadform.email,m.compose([m.required])],phone:[this.leadform.phone,m.compose([m.required])],message:[this.leadform.message,m.compose([m.required])],service:[this.leadform.service,m.compose([m.required])],date:[this.leadform.date,m.compose([m.required])],address:[this.leadform.address,m.compose([m.required])],comments:[this.leadform.comments,m.compose([m.required])],status:[this.leadform.status,m.compose([m.required])]})}convertDateForUpdate(n){let d=n,e=new Date(d),c=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),ue=String(e.getDate()).padStart(2,"0");return`${c}-${t}-${ue}`}addLeadForm(){if(!this.validation.validateForm(this.form)){this.toastr.error("Some fields are missing!");return}try{this.loading=!0,this.leadFormService.insert(this.leadform,"lead_form/create").subscribe(n=>{n.status?(this.router.navigate(["/lead_form"]),this.toastr.success("Lead form has been added!")):n.status==!1&&(this.loading=!1,this.toastr.error(`${n.message}`))})}catch(n){console.log(n)}}updateLeadForm(){if(!this.validation.validateForm(this.form)){this.toastr.error("Some fields are missing!");return}try{this.loading=!0,this.leadFormService.update(`lead_form/update?id=${this.leadform._id}`,this.leadform).subscribe(n=>{n.status?(this.router.navigate(["/lead_form"]),this.toastr.success("Lead form has been updated!")):n.status==!1&&(this.loading=!1,this.toastr.error(`${n.message}`))})}catch{this.loading=!1,this.toastr.error("Unknown error occured!")}}};a.\u0275fac=function(d){return new(d||a)(_(k),_(w),_(ae),_(ce),_(me))},a.\u0275cmp=A({type:a,selectors:[["app-add-new-lead-form"]],standalone:!0,features:[V],decls:56,vars:16,consts:[[1,"bg-light","dark:bg-transparent","d-flex","flex-row","align-items-center"],["cForm","",3,"formGroup"],[1,"row","mb-3"],[1,"col-md-4"],["cLabel","","for","formControlInput"],["cFormControl","","id","formControlInput","placeholder","name","type","text","formControlName","name",3,"ngModelChange","ngModel"],["cFormControl","","id","formControlInput","placeholder","email","type","email","formControlName","email",3,"ngModelChange","ngModel"],["cFormControl","","placeholder","phone","type","number","formControlName","phone",3,"ngModelChange","ngModel"],[1,"mb-3"],["formControlName","message","placeholder","message","cFormControl","","id","exampleFormControlTextarea1","rows","6",3,"ngModelChange","ngModel"],["cLabel","","for","exampleFormControlInput1"],["formControlName","service","aria-label","Large select example","cSelect","","sizing","md",1,"mb-3",3,"ngModelChange","ngModel"],["value","One"],["value","Two"],["value","Three"],["cFormControl","","type","date","formControlName","date",3,"ngModelChange","ngModel"],["cFormControl","","id","address","placeholder","address","type","text","formControlName","address",3,"ngModelChange","ngModel"],["formControlName","comments","placeholder","comments","cFormControl","","id","exampleFormControlTextarea1","rows","6",3,"ngModelChange","ngModel"],["formControlName","status","aria-label","Large select example","cSelect","","sizing","md",1,"mb-3",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-5"],[4,"ngIf"],[3,"value"],["cButton","","color","primary",3,"click","disabled"],["color","white","size","sm","role","status","aria-hidden","true",4,"ngIf"],["color","white","size","sm","role","status","aria-hidden","true"]],template:function(d,e){d&1&&(o(0,"div",0)(1,"c-container")(2,"h2"),s(3),i(),o(4,"form",1)(5,"div",2)(6,"div",3)(7,"label",4),s(8,"Name"),i(),o(9,"input",5),h("ngModelChange",function(t){return g(e.leadform.name,t)||(e.leadform.name=t),t}),i()(),o(10,"div",3)(11,"label",4),s(12,"Email"),i(),o(13,"input",6),h("ngModelChange",function(t){return g(e.leadform.email,t)||(e.leadform.email=t),t}),i()(),o(14,"div",3)(15,"label",4),s(16,"Phone"),i(),o(17,"input",7),h("ngModelChange",function(t){return g(e.leadform.phone,t)||(e.leadform.phone=t),t}),i()()(),o(18,"div",8)(19,"label",4),s(20,"Message"),i(),o(21,"textarea",9),h("ngModelChange",function(t){return g(e.leadform.message,t)||(e.leadform.message=t),t}),i()(),o(22,"div",2)(23,"div",3)(24,"label",10),s(25,"Service"),i(),o(26,"select",11),h("ngModelChange",function(t){return g(e.leadform.service,t)||(e.leadform.service=t),t}),o(27,"option"),s(28,"Choose Service"),i(),o(29,"option",12),s(30,"One"),i(),o(31,"option",13),s(32,"Two"),i(),o(33,"option",14),s(34,"Three"),i()()(),o(35,"div",3)(36,"label",10),s(37,"Date & Time"),i(),o(38,"input",15),h("ngModelChange",function(t){return g(e.leadform.date,t)||(e.leadform.date=t),t}),i()(),o(39,"div",3)(40,"label",10),s(41,"Address"),i(),o(42,"input",16),h("ngModelChange",function(t){return g(e.leadform.address,t)||(e.leadform.address=t),t}),i()()(),o(43,"div",8)(44,"label",10),s(45,"Comments"),i(),o(46,"textarea",17),h("ngModelChange",function(t){return g(e.leadform.comments,t)||(e.leadform.comments=t),t}),i()(),o(47,"div",2)(48,"div",3)(49,"label",10),s(50,"Status"),i(),o(51,"select",18),h("ngModelChange",function(t){return g(e.leadform.status,t)||(e.leadform.status=t),t}),C(52,_e,2,2,"option",19),i()()(),o(53,"div",20),C(54,Se,4,2,"ng-container",21)(55,ve,4,2,"ng-container",21),i()()()()),d&2&&(l(3),D("",e.page_title," Lead"),l(),u("formGroup",e.form),l(5),f("ngModel",e.leadform.name),l(4),f("ngModel",e.leadform.email),l(4),f("ngModel",e.leadform.phone),l(4),f("ngModel",e.leadform.message),L("style","resize: none;",b),l(5),f("ngModel",e.leadform.service),l(12),f("ngModel",e.leadform.date),l(4),f("ngModel",e.leadform.address),l(4),f("ngModel",e.leadform.comments),L("style","resize: none;",b),l(5),f("ngModel",e.leadform.status),l(),u("ngForOf",e.statuses),l(2),u("ngIf",!e.is_update),l(),u("ngIf",e.is_update))},dependencies:[j,P,z,J,Y,le,$,ne,re,K,ee,ie,Q,X,de,te,oe,H,G,U,O,R]});let r=a;return r})();export{Oe as AddNewLeadFormComponent};
